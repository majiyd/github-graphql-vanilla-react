{"version":3,"sources":["views/App/App.module.css","views/components/Star/Star.module.css","views/Repositories/Repositories.module.css","views/components/Button/Button.module.css","views/Login/Login.module.css","views/components/Button/index.js","views/components/Star/index.js","views/Repositories/index.js","context.js","views/Login/index.js","axios-config.js","views/App/index.js","index.js"],"names":["module","exports","app","input","star","repositories","repos","primary","login","Button","props","isDisabled","react_default","a","createElement","type","className","styles","onClick","handleClick","disabled","text","Star","viewerHasStarred","unStarRepository","id","title","starRepository","Repositories","undefined","length","errors","style","textAlign","Fragment","href","url","edges","map","edge","key","node","name","pageInfo","hasPreviousPage","onFetchPreviousRepositories","hasNextPage","onFetchMoreRepositories","UserContext","React","createContext","UserProvider","Provider","Consumer","Login","_this","this","code","window","location","match","context","setFetchingToTrue","fetch","concat","then","response","json","_ref","token","unSetFetchingToFalse","setToken","_this2","marginBottom","backgroundColor","color","padding","margin","borderRadius","Component","contextType","GET_USER","STAR_REPOSITORY","UNSTAR_REPOSITORY","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onChange","e","setState","user","target","value","onSubmit","searchingUser","state","cursors","fetchFromGithub","preventDefault","fetchMoreRepositories","endCursor","cursor","axios","post","query","variables","headers","Authorization","res","data","toConsumableArray","catch","err","fetchPreviousRepositories","slice","repositoryId","newEdges","objectSpread","bind","assertThisInitialized","_this$state","form","htmlFor","border","views_Login","Root","isFetching","position","width","zIndex","textShadow","views_App","ReactDOM","render","src_Root","document","getElementById"],"mappings":"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","file":"static/js/main.b9648ce1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__26vqA\",\"input\":\"App_input__3L_gL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"star\":\"Star_star__P1cBw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"repositories\":\"Repositories_repositories__1dhs-\",\"repos\":\"Repositories_repos__2pLKs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"primary\":\"Button_primary__r89pR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__kdPEu\"};","import React from \"react\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nexport function Button(props) {\r\n  switch (props.isDisabled) {\r\n    case true: {\r\n      return (\r\n        <button\r\n          type={props.type}\r\n          className={styles.primary}\r\n          onClick={props.handleClick}\r\n          disabled\r\n        >\r\n          {props.text}\r\n        </button>\r\n      );\r\n    }\r\n    default: {\r\n      return (\r\n        <button\r\n          type={props.type}\r\n          className={styles.primary}\r\n          onClick={props.handleClick}\r\n        >\r\n          {props.text}\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from 'react';\r\nimport styles from './Star.module.css'\r\n\r\nexport function Star(props){\r\n  switch (props.viewerHasStarred){\r\n    case true: {\r\n      return (\r\n        <span \r\n          className={styles.star} \r\n          onClick={() => (props.unStarRepository(props.id))}\r\n        >\r\n          <abbr title='Unstar Repository'>&#9733;</abbr>\r\n        </span>\r\n      )\r\n    }\r\n    case false: {\r\n      return (\r\n        <span \r\n          className={styles.star} \r\n          onClick={() => (props.starRepository(props.id))}\r\n        >\r\n          <abbr title='Star Repository'>&#9734;</abbr>\r\n        </span>\r\n      )\r\n    }\r\n    default:\r\n      return (\r\n        <span \r\n          className={styles.star} \r\n          onClick={() => (props.starRepository(props.id))}\r\n        >\r\n          <abbr title='Star Repository'>&#9734;</abbr>\r\n        </span>\r\n      )\r\n  }\r\n}","import React from 'react';\r\nimport styles from './Repositories.module.css'\r\nimport {Button} from '../components/Button'\r\nimport {Star} from '../components/Star'\r\n\r\nexport function Repositories(props){\r\n  return(\r\n    <div className={styles.repositories}>\r\n      <h1>Repositories</h1>\r\n      <div>\r\n        {(props.repositories === undefined || props.repositories.length === 0 || props.errors) ? (\r\n          <h2 style={{textAlign: \"center\"}}>No Information Available</h2>\r\n        ):(\r\n          <React.Fragment>\r\n            <a href={props.url}>See On Github</a>\r\n            <ul className={styles.repos}>\r\n              \r\n              {props.repositories.edges.map(edge => (\r\n                <li key={edge.node.id}>\r\n                  <Star \r\n                    viewerHasStarred={edge.node.viewerHasStarred}\r\n                    id={edge.node.id}\r\n                    starRepository={props.starRepository}\r\n                    unStarRepository={props.unStarRepository}\r\n                  />\r\n                  {edge.node.name} <a href={edge.node.url}>{edge.node.url}</a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            {props.repositories.pageInfo.hasPreviousPage ? (\r\n              <Button \r\n                text=\"Prev\" \r\n                handleClick={props.onFetchPreviousRepositories}/>\r\n              ):(\r\n                <Button \r\n                  text=\"Prev\"\r\n                  isDisabled={true}\r\n                />\r\n              )\r\n            }\r\n            {props.repositories.pageInfo.hasNextPage ? (\r\n              <Button \r\n                text=\"Next\" \r\n                handleClick={props.onFetchMoreRepositories}/>\r\n              ):(\r\n                <Button \r\n                  text=\"Next\"\r\n                  isDisabled={true}\r\n                />\r\n              )\r\n            }\r\n            \r\n          </React.Fragment>\r\n          \r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport const UserContext = React.createContext({})\r\nexport const UserProvider = UserContext.Provider\r\nexport const UserConsumer = UserContext.Consumer","import React from 'react';\r\nimport * as context from '../../context.js'\r\nimport styles from './Login.module.css'\r\n\r\n//ever heard of cyclic dependencies? don't ever make that mistake again\r\n\r\nconst CLIENT_ID = \"ae2ae2dbb55737a71a4c\";\r\nconst REDIRECT_URI = \"http://localhost:3000/\";\r\n\r\nclass Login extends React.Component {\r\n  static contextType = context.UserContext;\r\n  componentDidMount() {\r\n    const code =\r\n      window.location.href.match(/\\?code=(.*)/) &&\r\n      window.location.href.match(/\\?code=(.*)/)[1];\r\n    if (code) {\r\n      this.context.setFetchingToTrue()\r\n      fetch(\r\n        `https://simple-github-graphql-client.herokuapp.com/authenticate/${code}`\r\n      )\r\n        .then(response => response.json())\r\n        .then(({ token }) => {\r\n          this.context.unSetFetchingToFalse()\r\n          token ? (this.context.setToken(1)):(this.context.setToken(0))\r\n          window.token = token\r\n        });\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={styles.login}>\r\n        <h1> Github Client</h1>\r\n        <div style={{\r\n          marginBottom: \"12%\"\r\n        }}>\r\n          <p>This is a simple app built by <a href=\"https://github.com/majiyd\">majiyd</a>. It is based on chapter 3 of Robin Wieruch's <a href=\"https://www.robinwieruch.de/graphql-tutorial/\">graphQL  tutorial</a>.</p>\r\n          <p>In this app, you can search for github users, star or unstar their repositories</p>\r\n        </div>\r\n        <a\r\n          href={`https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=user,repo&redirect_uri=${REDIRECT_URI}`}\r\n          onClick={()=>{this.context.setFetchingToTrue()}}\r\n          style={{\r\n            backgroundColor: \"#E10098\",\r\n            color: \"white\",\r\n            padding: \" 2% 3%\",\r\n            margin: \"0 1%\",\r\n            borderRadius: \"3px\",\r\n          }}\r\n        >\r\n          Signin with Github\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nLogin.contextType = context.UserContext;\r\nexport default Login;","export const GET_USER = `\r\n  query (\r\n    $user: String!,\r\n    $cursor: String\r\n  ){\r\n    user(login: $user){\r\n      name\r\n      url\r\n      repositories(first:5 after: $cursor ){\r\n        edges{\r\n          node{\r\n            name\r\n            url\r\n            id\r\n            viewerHasStarred\r\n          }\r\n        }\r\n        totalCount\r\n        pageInfo{\r\n          endCursor\r\n          hasNextPage\r\n          hasPreviousPage\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const STAR_REPOSITORY = `\r\n  mutation ($repositoryId: ID!){\r\n    addStar(input:{starrableId: $repositoryId}){\r\n      starrable{\r\n        viewerHasStarred\r\n      }\r\n    }\r\n  }\r\n`\r\nexport const UNSTAR_REPOSITORY = `\r\n  mutation ($repositoryId: ID!) {\r\n    removeStar(input: { starrableId: $repositoryId }) {\r\n      starrable {\r\n        viewerHasStarred\r\n      }\r\n    }\r\n  }\r\n`","import React from \"react\";\r\nimport axios from 'axios'\r\nimport styles from './App.module.css'\r\nimport {Repositories} from '../Repositories'\r\nimport {Button} from '../components/Button'\r\nimport Login from '../Login'\r\nimport {UserContext} from '../../context'\r\nimport {\r\n  GET_USER,\r\n  STAR_REPOSITORY,\r\n  UNSTAR_REPOSITORY\r\n} from '../../axios-config';\r\n\r\nclass App extends React.Component {\r\n  static contextType = UserContext;\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      user: 'majiyd',\r\n      searchingUser: null,\r\n      url: null,\r\n      errors: null,\r\n      repositories: [],\r\n      cursors:[]\r\n    }\r\n    this.starRepository = this.starRepository.bind(this)\r\n  }\r\n  \r\n  onChange = e => {\r\n    this.setState({\r\n      user: e.target.value\r\n    })\r\n  }\r\n  onSubmit = e => {\r\n    this.setState({\r\n      searchingUser: this.state.user,\r\n      cursors: []\r\n    })\r\n    this.fetchFromGithub(this.state.user)\r\n    e.preventDefault()\r\n  }\r\n  fetchMoreRepositories = () => {\r\n    const {endCursor} = this.state.repositories.pageInfo\r\n    this.fetchFromGithub(this.state.searchingUser, endCursor)\r\n    \r\n  }\r\n  fetchFromGithub = (user, cursor) => {\r\n    this.context.setFetchingToTrue()\r\n    axios.post('https://api.github.com/graphql', {\r\n        query: GET_USER,\r\n        variables: {user, cursor}\r\n      }, {\r\n        headers: {\r\n          Authorization: `bearer ${window.token}`\r\n        }\r\n      })\r\n      .then(res => {\r\n        this.setState({\r\n          url: res.data.data.user.url,\r\n          repositories: res.data.data.user.repositories,\r\n          errors: null,\r\n          cursors:[\r\n            ...this.state.cursors, res.data.data.user.repositories.pageInfo.endCursor\r\n          ]\r\n        })\r\n        this.context.unSetFetchingToFalse()\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: err\r\n        })\r\n        this.context.unSetFetchingToFalse()\r\n      })\r\n  }\r\n\r\n  fetchPreviousRepositories = () => {\r\n    this.context.setFetchingToTrue()\r\n    const cursors = this.state.cursors.slice(0, -2)\r\n    this.setState({\r\n      cursors: cursors\r\n    })\r\n    const user = this.state.searchingUser\r\n    const cursor = cursors.slice(-1)[0]\r\n    this.fetchFromGithub(user, cursor)\r\n  }\r\n  starRepository = (repositoryId) => {\r\n    this.context.setFetchingToTrue()\r\n    return axios.post('https://api.github.com/graphql', {\r\n      query: STAR_REPOSITORY,\r\n      variables: {repositoryId}\r\n    }, {\r\n      headers: {\r\n        Authorization: `bearer ${window.token}`\r\n      }\r\n    })\r\n    .then( res => {\r\n      this.context.unSetFetchingToFalse()\r\n      const newEdges = this.state.repositories.edges.map(edge => {\r\n        if(edge.node.id === repositoryId){\r\n          const newEdge = {\r\n            ...edge,\r\n            node:{\r\n              ...edge.node,\r\n              viewerHasStarred: true\r\n            }\r\n          }\r\n          return newEdge\r\n        } else{\r\n          return edge\r\n        }\r\n      })\r\n      \r\n      return this.setState({\r\n        repositories:{\r\n          ...this.state.repositories,\r\n          edges: newEdges\r\n        }\r\n      })\r\n    })\r\n    .catch(err => {\r\n      this.setState({errors: err})\r\n      this.context.unSetFetchingToFalse()\r\n    })\r\n  }\r\n  unStarRepository = (repositoryId) => {\r\n    this.context.setFetchingToTrue()\r\n    return axios.post('https://api.github.com/graphql', {\r\n      query: UNSTAR_REPOSITORY,\r\n      variables: {repositoryId}\r\n    }, {\r\n      headers: {\r\n        Authorization: `bearer ${window.token}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      this.context.unSetFetchingToFalse()\r\n      const newEdges = this.state.repositories.edges.map(edge => {\r\n        if (edge.node.id === repositoryId){\r\n          const newEdge = {\r\n            ...edge,\r\n            node: {\r\n              ...edge.node,\r\n              viewerHasStarred: false\r\n            }\r\n            \r\n          }\r\n          return newEdge\r\n        } else {\r\n          return edge\r\n        }\r\n      })\r\n      \r\n      return this.setState({\r\n        repositories: {\r\n          ...this.state.repositories,\r\n          edges: newEdges\r\n        }\r\n      })\r\n    })\r\n    .catch(err => {\r\n      this.setState({errors: err})\r\n      this.context.unSetFetchingToFalse()\r\n    })\r\n  }\r\n  render() {\r\n    const { user, url, errors, repositories} = this.state\r\n    if (this.props.token) {\r\n      return (\r\n        <div className={styles.app}>\r\n          <h1>Github Client</h1>\r\n            <form onSubmit={this.onSubmit} className={styles.form}>\r\n              <div>\r\n                <label htmlFor=\"github-user\" >\r\n                  Get all repos by:\r\n                </label>\r\n                <input \r\n                  id=\"github-user\"\r\n                  type=\"text\"\r\n                  onChange={this.onChange}\r\n                  className={styles.input}\r\n                  value={user}\r\n                />\r\n              </div>\r\n              <Button \r\n                type={'submit'} \r\n                text={'Submit'}\r\n              />\r\n            </form>\r\n            <hr style={{\r\n              border: '1px solid rgba(0, 0, 0, 0.1)',\r\n              marginBottom: '4%'\r\n            }}/>\r\n            <Repositories \r\n              name={user} \r\n              url={url} \r\n              repositories={repositories}\r\n              errors={errors}\r\n              onFetchMoreRepositories={this.fetchMoreRepositories}\r\n              onFetchPreviousRepositories={this.fetchPreviousRepositories}\r\n              starRepository={this.starRepository}\r\n              unStarRepository={this.unStarRepository}\r\n            />\r\n        </div>\r\n      )\r\n    } else {\r\n      return( <Login />)\r\n    }   \r\n  }  \r\n}\r\n\r\nApp.contextType = UserContext\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './reset.css';\r\nimport App from './views/App'\r\nimport {UserProvider} from './context'\r\n\r\n\r\n\r\nclass Root extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      token: null,\r\n      isFetching: false\r\n    }\r\n  }\r\n  render() { \r\n    return (\r\n      <div>\r\n        {this.state.isFetching ? (\r\n          <h3 style={{ \r\n            textAlign: \"center\",\r\n            position: 'fixed',\r\n            color: \"#E10098\",\r\n            width: \"100%\",\r\n            zIndex: '3',\r\n            textShadow: \"0 1px 2px rgba(255, 0, 152,.1)\"\r\n          }}>Loading...</h3>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <UserProvider value={{\r\n          state: this.state,\r\n          setFetchingToTrue: () => {\r\n            this.setState({isFetching: true})\r\n          },\r\n          unSetFetchingToFalse: () => {\r\n            this.setState({isFetching: false})\r\n          },\r\n          setToken: (token) => {\r\n            this.setState({token: token})\r\n          }\r\n        }}>\r\n          <App token={this.state.token}/>\r\n        </UserProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nReactDOM.render(<Root />, document.getElementById('root'));"],"sourceRoot":""}